!function(t,e){"function"==typeof define&&define.amd?define([],e()):"object"==typeof exports?module.exports=e():t.StickyStates=e()}("undefined"!=typeof global?global:this.window||this.global,function(t){"use strict";function y(t,e){for(var i=0;t&&(!e||e!=t);)i+=t.offsetTop,t=t.offsetParent;return i}var g,d=!1,h={managers:[]},u={},p={elementSelector:"[data-sticky-states]",innerElementSelector:"[data-sticky-states-inner]",isEndPositionClass:"is-end-position",isStickyClass:"is-sticky",isStickyTopClass:"is-sticky--top",isStickyBottomClass:"is-sticky--bottom",isActivatedClass:"is-activated",positionAttribute:"data-sticky-position",thresholdAttribute:"data-sticky-threshold",stickyRelativeToAttribute:"data-sticky-relative-to",staticAtEndAttribute:"data-sticky-static-at-end",containerAttribute:"data-sticky-container",position:"top",threshold:0,refreshRate:50},k=function(){var i={},n=!1,t=0;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(n=arguments[0],t++);for(;t<arguments.length;t++)!function(t){for(var e in t)t.hasOwnProperty(e)&&(n&&"[object Object]"===Object.prototype.toString.call(t[e])?i[e]=k(i[e],t[e]):i[e]=t[e])}(arguments[t]);return i};h.isStickyPosition=function(t){if(t.matches("."+u.isStickyClass))return!0;t=window.getComputedStyle(t).position;return"fixed"==t||"sticky"==t};function r(t){var e=null,i=window.innerWidth;if(function(t){try{JSON.parse(t)}catch(t){return!1}return!0}(t))for(var n=Object.entries(JSON.parse(t)),s=0;s<n.length;s++){var o=n[s][1];if(i>=o.breakpointInitial&&i<=o.breakpointFinal){e=document.querySelector(o.selector);break}}else e=document.querySelector(t);return e}function E(){for(var t=window.pageYOffset||document.body.scrollTop,e=0;e<h.managers.length;e++){var i=h.managers[e],n=window.getComputedStyle(i.containerElement),s=window.getComputedStyle(i.stickyElement),o=parseInt(n.height.replace("px")),r=parseInt(s.height.replace("px")),l=r<o,a=t>=i.settings.threshold,c=0,m=t>=i.settings.endThreshold,n=i.stickyElement.hasAttribute(i.settings.staticAtEndAttribute);i.relativeElement&&!!((s=i.relativeElement).offsetWidth||s.offsetHeight||s.getClientRects().length)&&h.isStickyPosition(i.relativeElement)&&(c=i.relativeElement.getBoundingClientRect().height,a=t>=i.settings.threshold-c,m=t>=i.settings.endThreshold-c),a&&l&&!m?(a=window.getComputedStyle(i.innerElement).width,i.innerElement.style.top=0<c?c+"px":"",i.innerElement.style.width=a,i.stickyElement.style.height=r+"px",i.stickyElement.style.position="",i.stickyElement.classList.add(i.settings.isStickyClass,"top"==i.settings.position?i.settings.isStickyTopClass:i.settings.isStickyBottomClass),i.stickyElement.classList.remove(i.settings.isEndPositionClass)):m&&l&&!n?(n=y(i.stickyElement)-y(i.containerElement),i.innerElement.style.top=o-r-n+"px",i.stickyElement.style.height=r+"px",i.stickyElement.classList.remove(i.settings.isStickyClass,i.settings.isStickyTopClass,i.settings.isStickyBottomClass),i.stickyElement.classList.add(i.settings.isEndPositionClass)):(i.stickyElement.classList.remove(i.settings.isStickyClass,i.settings.isStickyTopClass,i.settings.isStickyBottomClass,i.settings.isEndPositionClass),i.stickyElement.style.height="",i.innerElement.style.width="",i.innerElement.style.top="")}}function f(){for(var t=0;t<h.managers.length;t++){var e=h.managers[t];e&&h.resetStickyLimits(e)}}var v,b=function(){v(),window.requestAnimationFrame(b)};return h.resetStickyLimits=function(t){var e=Math.max(document.documentElement.clientHeight,window.innerHeight||0),i=t.stickyElement.getAttribute(t.settings.thresholdAttribute),n=t.stickyElement.getBoundingClientRect(),s=y(t.stickyElement);t.settings.threshold=isNaN(parseInt(i))?s:parseInt(i),"bottom"==t.settings.position&&(t.settings.threshold=Math.max(t.settings.threshold-e+n.height,0));var o=t.stickyElement.getAttribute(t.settings.stickyRelativeToAttribute);null!=o&&""!=o&&(t.relativeElement=r(o)),t.containerElement=t.stickyElement.parentNode;s=t.stickyElement.getAttribute(t.settings.containerAttribute);null!=s&&""!=s&&(t.containerElement=t.stickyElement.closest(s),t.containerElement||(t.containerElement=document.querySelector(s))),t.containerElement&&(i=parseInt(window.getComputedStyle(t.containerElement).height.replace("px")),o=parseInt(window.getComputedStyle(t.stickyElement).height.replace("px")),s=y(t.stickyElement)-y(t.containerElement),t.settings.endThreshold=t.settings.threshold+i-o-s,"bottom"!=t.settings.position||(n=y(t.stickyElement)-e+n.height)>t.settings.threshold&&(t.settings.endThreshold=n))},h.getInstance=function(t){for(var e,i=0;i<h.managers.length;i++){var n=h.managers[i];if(n.stickyElement==t){e=n;break}}return e=e||h.getInstanceFromInner(t)},h.getInstanceFromInner=function(t){for(var e,i=0;i<h.managers.length;i++){var n=h.managers[i];if(n.innerElement==t){e=n;break}}return e},h.initializeElement=function(t){var e={};e.settings=k(u),e.stickyElement=t,e.innerElement=e.stickyElement.querySelector(e.settings.innerElementSelector);t=e.stickyElement.getAttribute(e.settings.positionAttribute);e.settings.position="top"==t||"bottom"==t?t:u.position,h.resetStickyLimits(e),g&&(g.observe(e.containerElement),g.observe(e.stickyElement),g.observe(e.innerElement)),e.isActivated=!0,e.stickyElement.classList.add(e.settings.isActivatedClass),h.managers.push(e)},h.init=function(t){if(!d){var n,s,o,r;u=k(p,t),window.ResizeObserver&&(g=new ResizeObserver((n=f,s=u.refreshRate,function(){var t=this,e=arguments,i=o&&!r;clearTimeout(r),r=setTimeout(function(){r=null,o||n.apply(t,e)},s),i&&n.apply(t,e)})));for(var l,a,c,m,y,e=document.querySelectorAll(u.elementSelector),i=0;i<e.length;i++)h.initializeElement(e[i]);l=E,a=(a=u.refreshRate)||250,v=function(){var t=c||this,e=+new Date,i=arguments;m&&e<m+a?(clearTimeout(y),y=setTimeout(function(){m=e,l.apply(t,i)},a)):(m=e,l.apply(t,i))},requestAnimationFrame(b),d=!0}},h});
//# sourceMappingURL=maps/sticky-states.min.js.map
